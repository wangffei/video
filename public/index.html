<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
	<title>动漫信息网</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<script src="./js/vue.js"></script>
	<script type="text/javascript" src="./js/jquery.js"></script>
	<script type="text/javascript" src="./js/router.js"></script>
	<!-- 引入样式 -->
	<link rel="stylesheet" href="./css/elementui.min.css">
	<!-- 引入组件库 -->
	<script src="./js/elementui.min.js"></script>
	<script src="./layui/lay/modules/layer.js"></script>
	<link rel="stylesheet" href="./layui/css/modules/layer/default/layer.css">
	<style type="text/css">
		*{margin:0px;padding:0px;}
		html,body{width:100%;height:100%;}
		#app{
			width:100%;height:auto;
		}
		#theme_top{
			width:100%;
			height:140px;
		}
		#theme_top .top{
			width:100%;height:30px;background:white;position:absolute;top:0px;
			filer:alpha(opacity=80);
      		opacity:0.8;
		}
		#theme_top .bottom{
			width:100%;height:140px;background:url('./img/new_bg.jpg') -115px;
		}
		#theme_top .bottom .container{
			width:1250px;
			height:100%;
			margin:0px auto;
			display:flex;
		}
		#theme_top .bottom .container .logo{
			width:300px;
			height:86px;
			background:url('./img/logo.png') -57px;
			margin-top:45px;
		}
		#theme_top .bottom .container .search{
			width:650px;
			height:50px;
		}
		#theme_top .bottom .container .search .search_el{
			width:500px;height:50px;background:#8fbbe7;
			margin:65px auto;display:flex;
		}
		#theme_top .bottom .container .search .search_el .search_panel{
			width:440px;height:45px;margin:2.5px 0px 2.5px 2.5px;overflow:hidden;
		}
		#theme_top .bottom .container .search .search_el .search_btn{
			width:60px;height:50px;cursor:pointer;color:white;line-height:50px;text-align:center;
		}
		#container{
			width:100%;
		}
		#container .bar{
			width:100%;height:50px;background:url('./img/nav_bg.png');border-bottom:4px solid #8fbbe7;
		}
		#container .bar .bar_content{
			width:1250px;height:50px;margin:0px auto;display:flex;
		}
		#container .bar .bar_content .item{
			width:110px;height:50px;font-size:18px;line-height:50px;text-align:center;cursor:pointer;color:white;margin-left:4px;
		}
		#container .bar .bar_content .selected{
			background:#8fbbe7;color:blue;margin-left:0px;
		}
		#container .bar .bar_content .item:hover{
			background:#8fbbe7;color:blue;
		}
		#container .content{
			width:1250px;margin:0px auto;height:auto;overflow:hidden;margin-top:20px;
		}
		#container .content .hot{
			width:100%;height:400px;display:flex;
		}
		#container .content .hot .lunbo{
			width:900px;overflow:hidden;
		}

		/* 热门资讯开始 */
		#container .content .hot .hot_items{
			width:300px;margin-left:50px;
			height:400px;
		}
		#container .content .hot .hot_title{
			width:100%;height:38px;display:flex;
			border-bottom:2px solid red;
		}
		#container .content .hot .hot_title .hot_title_txt{
			flex-grow:1;font-size:20px;line-height:38px;
		}
		#container .content .hot .hot_items .hot_panel{
			width:100%;height:362px;
		}
		/* 热门资讯结束 */


		#container .content .content_news{
			width:100%;margin-top:30px;display:flex;
		}

		/* 新闻资讯标题css开始 */
		#container .content .content_news .left{
			width:900px;
		}
		#container .content .content_news .left .theme{
			width:100%;height:40px;border-bottom:2px solid red;display:flex;
		}
		#container .content .content_news .left .theme .news_title_txt{
			flex-grow:1;font-size:20px;line-height:38px;
		}
		/* 新闻资讯标题css结束 */

		/* 新闻卡片布局开始 */
		#container .content .content_news .left .news_item{
			width:100%;height:160px;overflow:hidden;padding:10px 0px;border-bottom:1px solid #e9e9e9 ;display:flex;
		}
		#container .content .content_news .left .news_item .cover{
			width:250px;height:160px;overflow:hidden;cursor:pointer;
		}
		#container .content .content_news .left .news_item .cover img{
			width:250px;height:160px;
		}
		#container .content .content_news .left .news_item .news_item_right{
			display:flex;flex-direction:column;width:635px;margin-left:15px;
		}
		#container .content .content_news .left .news_item .news_item_right .head{
			width:100%;height:32px;font-size:20px;display:flex;overflow:hidden;cursor:pointer;
		}
		#container .content .content_news .left .news_item .news_item_right .head:hover{
			color:blue;
		}
		#container .content .content_news .left .news_item .news_item_right .head .new_item_title_main{
			line-height:32px;
		}
		#container .content .content_news .left .news_item .news_item_right .info_1{
			width:100%;height:30px;margin-top:5px;color:red;display:flex;
		}
		#container .content .content_news .left .news_item .news_item_right .info_1 .type{
			display:flex;line-height:32px;font-size:12px;
		}
		#container .content .content_news .left .news_item .news_item_right .info_1 .type .type_item{
			width:50px;height:20px;background:#dddddd;line-height:20px;text-align:center;margin:5px;border-radius:14px;
		}
		#container .content .content_news .left .news_item .news_item_right .info_1 .type .type_item:hover{
			background:red;color:white;
		}
		#container .content .content_news .left .news_item .news_item_right .info_1 .source{
			display:flex;line-height:32px;font-size:12px;margin-left:30px;
		}
		#container .content .content_news .left .news_item .news_item_right .info_2{
			width:100%;height:40px;line-height:20px;font-size:12px;margin:8px 0px;color:#8f8d8d;overflow:hidden;
		}
		#container .content .content_news .left .news_item .news_item_right .footer{
			width:100%;height:20px;display:flex;margin-top:12px;font-size:12px;color:#958e8e;
		}
		#container .content .content_news .left .news_item .news_item_right .footer .time{
			width:250px;height:20px;margin-top:10px;line-height:20px;display:flex;
		}
		#container .content .content_news .left .news_item .news_item_right .footer .count{
			width:250px;height:20px;margin-top:10px;line-height:20px;display:flex;
		}
		#container .content .content_news .left .page{
			width:400px;margin:30px auto;
		}
		/* 新闻资讯结束 */
	</style>
</head>
<body>
	<div id="app">
		<div id="theme_top">
			<div class="top">
				<div style="width:1250px;height:30px;margin:0px auto;">
					<div id="user" style="width:100px;height:30px;float:right;display:flex;">
						<a @click="login_()" href="#"><div style="margin-top:5px;width:50px;height:20px;line-height:20px;text-align:center;font-size:12px;border-right:1px solid #c2c2d1;">登陆</div></a>
						<a @click="regist_()" href="#"><div style="margin-top:5px;width:50px;height:20px;line-height:20px;text-align:center;font-size:12px;">注册</div></a>
					</div>
				</div>
			</div>
			<div class="bottom">
				<div class="container">
					<div class="logo"></div>
					<div class="search">
						<div class="search_el">
							<div class="search_panel">
								<input type="text" name="" style="width:100%;height:100%;font-size:16px;" placeholder="请输入关键字">
							</div>
							<div class="search_btn">
								搜索
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div id="container">
			<div class="bar">
				<div class="bar_content">
					<div class="item selected">首页</div>
					<div class="item">国创动漫</div>
					<div class="item">日本动漫</div>
					<div class="item">留言专区</div>
				</div>
			</div>
			<div class="content">
				<div class="hot">
					<div class="lunbo">
						<el-carousel height="400px">
					      <el-carousel-item v-for="item in imgs" :key="item">
					        <a :href="item.link" :title="item.title" target="_blank" ><img :src="item.img_url" style="width:900px;height:400px;"></a>
					      </el-carousel-item>
					    </el-carousel>
					</div>
					<div class="hot_items">
						<div class="hot_title">
							<i style="display:block;background:url('./img/hot.png');width:32px;height:32px;margin-top:4px;"></i>
							<div class="hot_title_txt">热门资讯</div>
						</div>
						<div class="hot_panel">
							<div v-for="(item , index) in hot" style="width:100%;margin-top:3px;display:flex;" :style="{height:(index == 0 ? 80 : 28)+'px' }">
								<a :href="'./detail.html?url='+item.url" target="_blank" style="display:flex;">
									<div v-if="index != 0" style="width:4px;height:4px;border-radius:50%;margin:12px 10px 12px 0px;background:#b6b5b5;"></div>
									<div v-if="index == 0" style="width:100%;height:80px;display:flex;">
										<div style="width:100px;height:60px;margin:10px 0px;">
											<img :src="item.cover" style="width:100%;height:100%;" />
										</div>
										<div style="width:190px;height:60px;margin:10px 0px 10px 10px;color:#b6b5b5;line-height:20px;overflow:hidden;font-size:12px;">
											{{item.heading}}
										</div>
									</div>
									<div v-if="index != 0" style="width:280px;height:28px;color:#b6b5b5;line-height:28px;overflow:hidden;font-size:12px;margin-right:5px;">
										{{item.heading}}
									</div>
								</a>
							</div>
						</div>
					</div>
				</div>
				<div class="content_news">
					<div class="left">
						<div class="theme">
							<i style="width:32px;height:32px;display:block;background:url('./img/news.png');margin-top:4px;"></i>
							<div class="news_title_txt">新闻资讯</div>
						</div>
						<div v-for="item in news" class="news_item">
							<div @click="go(item.url)" class="cover">
								<img :src="item.cover" />
							</div>
							<div class="news_item_right">
								<div @click="go(item.url)" class="head">
									<i style="width:32px;height:32px;display:block;background:url('./img/title.png');"></i>
									<div class="new_item_title_main">{{item.heading}}</div>
								</div>
								<div class="info_1">
									<div class="type">
										<i style="width:16px;height:16px;display:block;background:url('./img/type.png');margin:8px 3px;"></i>
										<div class="type_item">{{item.tag_name}}</div>
									</div>
									<div class="source">
										<i style="width:16px;height:16px;display:block;background:url('./img/author.png');margin:8px 3px;"></i>
										<div class="type_item">{{item.author}}</div>
									</div>
								</div>
								<div class="info_2">
									{{item.sub_heading}}
								</div>
								<div class="footer">
									<div class="time">
										<i style="width:16px;height:16px;display:block;background:url('./img/time.png');margin:2px 3px;"></i>
										<div class="type_item">{{item.release_time}}</div>
									</div>
									<div class="count">
										<i style="width:16px;height:16px;display:block;background:url('./img/view.png');margin:2px 3px;"></i>
										<div class="type_item">{{item.page_view}}</div>
									</div>
								</div>
							</div>
						</div>
						<div class="page">
							<el-pagination background layout="prev, pager, next" :total="total" @current-change="page"></el-pagination>
						</div>
					</div>
				</div>
			</div>
			<div style="width:100%;height:160px;background:#8fbbe7;text-align:center;overflow:hidden;">
				<div style="color:#615f5f;font-size:12px;margin-top:50px;">
					动漫信息网，为您提供优质的动漫资讯，为您提供快速流畅的动漫播放
				</div>
				<div style="color:#615f5f;font-size:12px;margin-top:50px;">
					Copyright © 2005-2015 动漫信息网
				</div>
			</div>
		</div>
	</div>
</body>
<script type="text/javascript">
	var width = $(document).width()
	var height = $(document).height()

	new Vue({
      el: '#app',
      data: {
    	imgs: [
    		{img_url:"./img/bg1.png" , link:"#" , title:""} ,
    		{img_url:"./img/bg2.png" , link:"#" , title:""}
    	] ,
    	news:[{},{},{},{},{},{},{},{},{},{}] ,
    	total:100 ,
    	current:1 ,
    	hot:[{},{},{},{},{},{},{},{},{},{}] ,
    	login:false ,
    	nickname:""
      } ,
      created:function(){
      	var self = this 
      	$.ajax({
      		url:"/api/news/1/10" ,
      		success:function(res){
      			if(res.code == 200){
      				self.news = res.data.list
      				self.total = res.data.count 
      			}
      		}
      	}) ;
      	$.ajax({
      		url:"/api/cartoons" ,
      		success:function(res){
      			if(res.code == 200){
      				self.imgs = res.data 
      			}
      		}
      	}) ;
      	$.ajax({
      		url:"/api/hot" ,
      		success:function(res){
      			if(res.code == 200){
      				self.hot = res.data
      			}
      		}
      	})
      } ,
      methods:{
      	go:function(url){
      		for(var i in this.news){
      			if(this.news[i].url == url){
      				this.news[i].page_view++
      			}
      		}
      		window.open("detail.html?url="+url)
      	} ,
      	page:function(val){
      		var self = this
      		const loading = this.$loading({
	          lock: true,
	          text: 'Loading',
	          spinner: 'el-icon-loading',
	          background: 'white'
	        });
      		$.ajax({
	      		url:"/api/news/"+val+"/10" ,
	      		success:function(res){
	      			if(res.code == 200){
	      				self.current = val 
	      				self.news = res.data.list
	      				self.total = res.data.count 
	      			}
	      			loading.close();
	      		},
	      		fail:function(){
	      			loading.close();
	      		}
	      	})
      	} ,
      	login_:function(){
      		layer.open({
      			type:2 ,
				title:false ,
				area:["350px" , "300px"] ,
				content:"./login.html"
			})
      	}
      }
    })
</script>
</html>